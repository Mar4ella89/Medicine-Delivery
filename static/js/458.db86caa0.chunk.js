"use strict";(self.webpackChunkmedicine_delivery=self.webpackChunkmedicine_delivery||[]).push([[458],{516:(e,r,s)=>{s.d(r,{A:()=>t});const a="Container_container__VVOCq";var i=s(579);const t=e=>{let{children:r}=e;return(0,i.jsx)("div",{className:a,children:r})}},916:(e,r,s)=>{s.r(r),s.d(r,{default:()=>C});var a=s(401),i=s(516),t=s(43),d=s(725);const l={sectionMedicine:"OrderCardList_sectionMedicine__n0g8s",wrapper:"OrderCardList_wrapper__tefiF",listMedicine:"OrderCardList_listMedicine__xy64k",itemMedicine:"OrderCardList_itemMedicine__ZFM7N",img:"OrderCardList_img__uN93P",discription:"OrderCardList_discription__cmAz6",subtitle:"OrderCardList_subtitle__aTMXm",medicineOrder:"OrderCardList_medicineOrder__RLVRW",btnOrder:"OrderCardList_btnOrder__ysNL5",input:"OrderCardList_input__rG+zA",button:"OrderCardList_button__7NsD9",action:"OrderCardList_action__02Sat",totalInfo:"OrderCardList_totalInfo__CSdG5",sum:"OrderCardList_sum__2wcAq",order:"OrderCardList_order__3PlIq",totalPrice:"OrderCardList_totalPrice__9YrdE"};var n=s(579);const c=()=>{const{cartItems:e,removeFromCart:r,updateQuantity:s}=(0,t.useContext)(d.A),a=e.map((e=>{let{_id:a,name:i,imgUrl:t,quantity:d,price:c,totalPrice:m}=e;return(0,n.jsx)("li",{className:l.itemMedicine,children:(0,n.jsxs)("div",{className:l.wrapper,children:[(0,n.jsx)("img",{src:t,alt:i,width:145,className:l.img}),(0,n.jsxs)("div",{className:l.discription,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:l.subtitle,children:i}),(0,n.jsxs)("p",{className:l.price,children:[c," $"]})]}),(0,n.jsx)("div",{className:l.medicineOrder,children:(0,n.jsxs)("div",{className:l.quantityWrapper,children:[(0,n.jsx)("button",{className:l.button,onClick:()=>((e,r)=>{r>1&&s(e,r-1)})(a,d),children:"-"}),(0,n.jsx)("input",{className:l.input,type:"number",value:d,onChange:e=>((e,r)=>{const a=parseInt(r.target.value);a>0&&s(e,a)})(a,e),min:"1",max:"10",required:!0}),(0,n.jsx)("button",{className:l.button,onClick:()=>((e,r)=>{s(e,r+1)})(a,d),children:"+"})]})})]}),(0,n.jsxs)("div",{className:l.action,children:[(0,n.jsx)("button",{type:"button",className:l.btnOrder,onClick:()=>{r(a)},children:"Remove"}),(0,n.jsxs)("p",{children:[m.toFixed(2)," $"]})]})]})},a+"1")})),i=e.reduce(((e,r)=>e+r.totalPrice),0),c=e.reduce(((e,r)=>e+r.quantity),0);return(0,n.jsxs)("section",{className:l.sectionMedicine,children:[(0,n.jsx)("ul",{className:l.listMedicine,children:a}),e.length?(0,n.jsxs)("div",{className:l.totalInfo,children:[(0,n.jsxs)("p",{children:["Selected medicines:",(0,n.jsxs)("span",{className:l.sum,children:[" ",c," "]})," pcs"]}),(0,n.jsxs)("p",{className:l.totalPrice,children:["Total price:",(0,n.jsxs)("span",{className:l.sum,children:[" ",i.toFixed(2)," "]})," $"]})]}):(0,n.jsx)("p",{className:l.order,children:"You don't have any item in your cart yet..."})]})};var m=s(892),o=s(899);const u=s(154).A.create({baseURL:"https://medicine-delivery-ztb4.onrender.com/api/orders"}),h={section:"OrderForm_section__z4iBk",field:"OrderForm_field__wTjiu",button:"OrderForm_button__YYeSI",radio:"OrderForm_radio__wxVyg",fieldName:"OrderForm_fieldName__0L8Hv",radioName:"OrderForm_radioName__GQv+d",error:"OrderForm_error__hSeEH"},p=["Pick up from store","Delivery to address","New Post"],x=o.Ik().shape({name:o.Yj().required("Name is required"),lastName:o.Yj().required("Last Name is required"),email:o.Yj().email("Invalid email format").required("Email is required"),phone:o.Yj().min(10,"Phone number must be at least 10 characters").max(15,"Phone number must not exceed 15 characters").matches(/^\+?\d+$/,'Phone number must contain only digits and may start with "+"').required("Phone number is required"),deliveryMethod:o.Yj().oneOf(p,"Please select a valid delivery method").required("Delivery method is required. Please enter your delivery method"),address:o.Yj().required("Address is required")}),_={name:"",lastName:"",email:"",phone:"",deliveryMethod:null,address:""},N=()=>{const{cartItems:e}=(0,t.useContext)(d.A);return(0,n.jsx)("section",{className:h.section,children:(0,n.jsx)(m.l1,{initialValues:_,validationSchema:x,onSubmit:async(r,s)=>{let{setSubmitting:i,resetForm:t}=s;try{const s={customer:{name:r.name,lastName:r.lastName,email:r.email,phone:r.phone,deliveryMethod:r.deliveryMethod,address:r.address},order:{items:e.map((e=>({quantity:e.quantity,totalPrice:e.totalPrice,medicineId:e._id}))),totalOrderPrice:e.reduce(((e,r)=>e+r.totalPrice),0)}};await(async e=>{try{const{data:r}=await u.post("/",e);return r}catch(r){throw console.error("Error submitting order:",r),r}})(s),a.oR.success("Order submitted successfully!"),t()}catch(d){console.error("Failed to submit order:",d),a.oR.warning("Failed to submit order. Please try again.")}finally{i(!1)}},children:e=>{let{isSubmitting:r}=e;return(0,n.jsxs)(m.lV,{children:[(0,n.jsxs)("label",{className:h.label,children:[(0,n.jsx)("span",{className:h.fieldName,children:"Name"}),(0,n.jsx)(m.D0,{className:h.field,name:"name",maxLength:"20",type:"text",placeholder:"Name"}),(0,n.jsx)(m.Kw,{name:"name",component:"div",className:h.error})]}),(0,n.jsxs)("label",{className:h.label,children:[(0,n.jsx)("span",{className:h.fieldName,children:"Last Name"}),(0,n.jsx)(m.D0,{className:h.field,name:"lastName",maxLength:"30",type:"text",placeholder:"Last Name"}),(0,n.jsx)(m.Kw,{name:"lastName",component:"div",className:h.error})]}),(0,n.jsxs)("label",{className:h.label,children:[(0,n.jsx)("span",{className:h.fieldName,children:"Email"}),(0,n.jsx)(m.D0,{className:h.field,name:"email",maxLength:"50",type:"email",placeholder:"Email"}),(0,n.jsx)(m.Kw,{name:"email",component:"div",className:h.error})]}),(0,n.jsxs)("label",{className:h.label,children:[(0,n.jsx)("span",{className:h.fieldName,children:"Phone"}),(0,n.jsx)(m.D0,{className:h.field,name:"phone",maxLength:"15",type:"text",placeholder:"Phone"}),(0,n.jsx)(m.Kw,{name:"phone",component:"div",className:h.error})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Choose delivery method"}),(0,n.jsx)("div",{className:h.radio,children:p.map((e=>(0,n.jsxs)("label",{className:h.radioLabel,children:[(0,n.jsx)("span",{className:h.radioName,children:e}),(0,n.jsx)(m.D0,{className:h.field,type:"radio",name:"deliveryMethod",value:e})]},e)))})]}),(0,n.jsxs)("label",{className:h.label,children:[(0,n.jsx)("span",{className:h.fieldName,children:"Address"}),(0,n.jsx)(m.D0,{className:h.field,name:"address",type:"text",placeholder:"Address"}),(0,n.jsx)(m.Kw,{name:"address",component:"div",className:h.error})]}),(0,n.jsx)("button",{className:h.button,type:"submit",disabled:r,children:"Submit"})]})}})})};var j=s(942);const b=e=>{let{currentDrug:r}=e;const{latitude:s,longitude:a}=r?r.coordinates:{latitude:50.442226451645666,longitude:30.53763616537363};return(0,n.jsx)(j.aJ,{googleMapsApiKey:"AIzaSyDKYZdu5xvm8s02742nhLWHdNVizpgEgsM",children:(0,n.jsx)(j.u6,{mapContainerStyle:{height:"400px",borderRadius:"10px"},center:{lat:s,lng:a},zoom:15,children:(0,n.jsx)(j.pH,{position:{lat:s,lng:a}})})})};var v=s(168);const y={mapWrapper:"OrderDrugForm_mapWrapper__lUPfB"},g=()=>{const{filteredDrug:e,drugsItem:r}=(0,t.useContext)(v.A);return(0,n.jsxs)("div",{className:y.formWrapper,children:[(0,n.jsx)("div",{className:y.mapWrapper,children:(0,n.jsx)(b,{currentDrug:e(r)})}),(0,n.jsx)(N,{})]})};s(342);const O="ShoppingCart_wrapper__RX6W7",C=()=>(0,n.jsxs)(i.A,{children:[(0,n.jsxs)("div",{className:O,children:[(0,n.jsx)(g,{}),(0,n.jsx)(c,{})]}),(0,n.jsx)(a.N9,{autoClose:3e3,position:"bottom-right"})]})}}]);
//# sourceMappingURL=458.db86caa0.chunk.js.map